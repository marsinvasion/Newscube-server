<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Server - monitor</title>
    <link rel="stylesheet" href="..&#x2F;assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="..&#x2F;assets/css/combo-min.css" id="site_styles">
    <script src="..&#x2F;assets/js/yui-min.js"></script>
    <script src="..&#x2F;assets/js/combo-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html">Monitor</a> <span class="version">v0.6.1</span></h1>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Connection.html">Connection</a></li>
            
                <li><a href="..&#x2F;classes/ConnectionTest.html">ConnectionTest</a></li>
            
                <li><a href="..&#x2F;classes/FileProbe.html">FileProbe</a></li>
            
                <li><a href="..&#x2F;classes/FileProbeTest.html">FileProbeTest</a></li>
            
                <li><a href="..&#x2F;classes/FileSyncProbe.html">FileSyncProbe</a></li>
            
                <li><a href="..&#x2F;classes/InspectProbe.html">InspectProbe</a></li>
            
                <li><a href="..&#x2F;classes/InspectTest.html">InspectTest</a></li>
            
                <li><a href="..&#x2F;classes/Log.html">Log</a></li>
            
                <li><a href="..&#x2F;classes/LogProbe.html">LogProbe</a></li>
            
                <li><a href="..&#x2F;classes/LogTest.html">LogTest</a></li>
            
                <li><a href="..&#x2F;classes/Monitor.html">Monitor</a></li>
            
                <li><a href="..&#x2F;classes/MonitorTest.html">MonitorTest</a></li>
            
                <li><a href="..&#x2F;classes/PollingProbe.html">PollingProbe</a></li>
            
                <li><a href="..&#x2F;classes/Probe.html">Probe</a></li>
            
                <li><a href="..&#x2F;classes/ProbeTest.html">ProbeTest</a></li>
            
                <li><a href="..&#x2F;classes/ProcessProbe.html">ProcessProbe</a></li>
            
                <li><a href="..&#x2F;classes/ReplProbe.html">ReplProbe</a></li>
            
                <li><a href="..&#x2F;classes/Router.html">Router</a></li>
            
                <li><a href="..&#x2F;classes/RouterTest.html">RouterTest</a></li>
            
                <li><a href="..&#x2F;classes/Server.html">Server</a></li>
            
                <li><a href="..&#x2F;classes/ServerTest.html">ServerTest</a></li>
            
                <li><a href="..&#x2F;classes/Stat.html">Stat</a></li>
            
                <li><a href="..&#x2F;classes/StatProbe.html">StatProbe</a></li>
            
                <li><a href="..&#x2F;classes/StatTest.html">StatTest</a></li>
            
                <li><a href="..&#x2F;classes/StreamProbe.html">StreamProbe</a></li>
            
                <li><a href="..&#x2F;classes/Sync.html">Sync</a></li>
            
                <li><a href="..&#x2F;classes/SyncProbe.html">SyncProbe</a></li>
            
                <li><a href="..&#x2F;classes/SyncProbeTest.html">SyncProbeTest</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/Monitor.html">Monitor</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1>Server Class</h1>
<div class="box meta">
    

    
        <div class="extends">
            Extends Backbone.Model
        </div>
    

    
        <div class="foundat">
            Defined in: <a href="..&#x2F;files&#x2F;lib_Server.js.html#l16"><code>lib&#x2F;Server.js:16</code></a>
        </div>
    

    
        
            Module: <a href="../modules/Monitor.html">Monitor</a>
        
    

    
</div>



<div class="box intro">
    <p>A server for accepting inbound connections from remote monitors</p>

<p>Servers are created when a process wants to expose probe data to remote
monitors.  Example:</p>

<pre class="code"><code class="prettyprint">// Accept remote monitors
var server = new Monitor.Server();
server.start();
</code></pre>

<p>An instance of this class represents a listening server accepting inbound
connections.  As inbound connections are detected, a new
<a href="Connection.html">Connection</a> object is created to manage
traffic on that connection.</p>

<p>Security:  Make sure the port range specified in Monitor.Config (starting
at 42000) is not exposed outside your internal network.  If you desire a
different security model, create your secure server and pass it to the
constructor.</p>
</div>


    <div class="constructor">
        <h2>Constructor</h2>
        <div id="method_Server" class="method item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l16" title="lib/Server.js:16">Server</a>
    </code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>model</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>


        

        
    </div>

    <div class="description">
        
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">model</code>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
                    

                    

                    <div class="param-description">
                        <ul>
<li>Initial data model.  Can be a JS object or another Model.</li>
</ul>
                    </div>

                    
                        <ul class="params-list">
                            
                            <li class="param">
                                
                                    <code class="param-name">gateway</code>
                                    <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a></span>
                                

                                <div class="param-description">
                                    <ul>
<li>Allow incoming monitors to use me as a gateway (default false)</li>
</ul>
                                </div>

                                
                            </li>
                            
                            <li class="param">
                                
                                    <code class="param-name">server</code>
                                    <span class="type">HttpServer</span>
                                

                                <div class="param-description">
                                    <ul>
<li>The listening node.js server.  Constructed by this class, or specified if a custom server is desired.</li>
</ul>
                                </div>

                                
                            </li>
                            
                            <li class="param">
                                
                                    <code class="param-name">port</code>
                                    <span class="type">Integer</span>
                                

                                <div class="param-description">
                                    <ul>
<li>The connected port.  This is set upon start() if the server isn't specified on construction.</li>
</ul>
                                </div>

                                
                            </li>
                            
                        </ul>
                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

    </div>


<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

        
            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
        
        
        
        
            <li class="api-class-tab events"><a href="#events">Events</a></li>
        
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

            
                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                        
                            <li class="index-item method protected">
                                <a href="#method_bindEvents">bindEvents</a>

                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_List">List</a>

                                
                                    <span class="flag static">static</span>
                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_start">start</a>

                                
                            </li>
                        
                            <li class="index-item method">
                                <a href="#method_stop">stop</a>

                                
                            </li>
                        
                    </ul>
                </div>
            

            

            

            
                <div class="index-section events">
                    <h3>Events</h3>

                    <ul class="index-list events">
                        
                            <li class="index-item event">
                                <a href="#event_error">error</a>

                                
                            </li>
                        
                            <li class="index-item event">
                                <a href="#event_start">start</a>

                                
                            </li>
                        
                            <li class="index-item event">
                                <a href="#event_stop">stop</a>

                                
                            </li>
                        
                    </ul>
                </div>
            
        </div>

        
            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

                
                    <div id="method_bindEvents" class="method item protected">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l154" title="lib/Server.js:154">bindEvents</a>
    </code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>callback</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    
        <span class="flag protected">protected</span>
    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Bind incoming socket events to the server</p>

<p>This method binds to the socket events and attaches the socket.io
server.  It is called when the connection starts listening.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">callback</code>
                        <span class="type">Function(error)</span>
                    

                    

                    <div class="param-description">
                        <ul>
<li>Called when all events are bound</li>
</ul>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method_List" class="method item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l245" title="lib/Server.js:245">List</a>
    </code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code class="optional">[items]</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    
        <span class="returns-inline">
            <span class="type">Backbone.Collection</span>
        </span>
    

    

    

    

    
        <span class="flag static">static</span>
    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Constructor for a list of Server objects</p>

<pre class="code"><code class="prettyprint">var myList = new Server.List(initialElements);
</code></pre>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name optional">[items]</code>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a></span>
                        <span class="flag optional" title="This parameter is optional.">optional</span>
                    

                    

                    <div class="param-description">
                        <p>Initial list items.  These can be raw JS objects or Server data model objects.</p>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    
        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                
                    
                        <span class="type">Backbone.Collection</span>:
                    
                    Collection of Server data model objects
                
            </div>
        </div>
    

    
</div>

                
                    <div id="method_start" class="method item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l52" title="lib/Server.js:52">start</a>
    </code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>options</code>
                    
                </li>
            
                <li class="arg">
                    
                        <code>callback</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Start accepting monitor connections</p>

<p>This method starts listening for incoming monitor connections on the
server.</p>

<p>If the server was specified during object creation, this binds the
socket.io service to the server.</p>

<p>If the server was not specified during object creation, this will create
a server on the first available monitor port.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">options</code>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
                    

                    

                    <div class="param-description">
                        <ul>
<li>Start options. OPTIONAL</li>
</ul>
                    </div>

                    
                        <ul class="params-list">
                            
                            <li class="param">
                                
                                    <code class="param-name">port</code>
                                    <span class="type">Integer</span>
                                

                                <div class="param-description">
                                    <ul>
<li>Port to attempt listening on if server isn't specified.  Default: 42000</li>
</ul>
                                </div>

                                
                            </li>
                            
                            <li class="param">
                                
                                    <code class="param-name">attempt</code>
                                    <span class="type">Integer</span>
                                

                                <div class="param-description">
                                    <ul>
<li>Attempt number for internal recursion detection.  Default: 1</li>
</ul>
                                </div>

                                
                            </li>
                            
                        </ul>
                    
                </li>
            
                <li class="param">
                    
                        <code class="param-name">callback</code>
                        <span class="type">Function(error)</span>
                    

                    

                    <div class="param-description">
                        <ul>
<li>Called when the server is accepting connections.</li>
</ul>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
                    <div id="method_stop" class="method item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l204" title="lib/Server.js:204">stop</a>
    </code></h3>

    
        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
            
                <li class="arg">
                    
                        <code>callback</code>
                    
                </li>
            
            </ul><span class="paren">)</span>
        </div>
    

    

    

    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>


        

        
    </div>

    <div class="description">
        <p>Stop processing inbound monitor traffic</p>

<p>This method stops accepting new inbound monitor connections, and closes
all existing monitor connections associated with the server.</p>
    </div>

    
        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
            
                <li class="param">
                    
                        <code class="param-name">callback</code>
                        <span class="type">Function(error)</span>
                    

                    

                    <div class="param-description">
                        <ul>
<li>Called when the server has stopped</li>
</ul>
                    </div>

                    
                </li>
            
            </ul>
        </div>
    

    

    
</div>

                
            </div>
        

        

        

        
            <div id="events" class="api-class-tabpanel">
                <h2 class="off-left">Events</h2>

                
                    <div id="event_error" class="events item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l79" title="lib/Server.js:79">error</a>
    </code></h3>
    <span class="type"></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>

        

        
    </div>

    <div class="description">
        <p>A client error has been detected</p>

<p>This event is fired if an error has been detected in the underlying
transport.  It may indicate message loss, and may result in a
subsequent stop event if the connection cannot be restored.</p>
    </div>

    


    
</div>

                
                    <div id="event_start" class="events item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l70" title="lib/Server.js:70">start</a>
    </code></h3>
    <span class="type"></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>

        

        
    </div>

    <div class="description">
        <p>The server has started</p>

<p>This event is fired when the server has determined the port to accept
connections on, and has successfully configured the server to start
accepting new monitor connections.</p>
    </div>

    


    
</div>

                
                    <div id="event_stop" class="events item">
    <h3 class="name"><code>
      <a href="..&#x2F;files&#x2F;lib_Server.js.html#l213" title="lib/Server.js:213">stop</a>
    </code></h3>
    <span class="type"></span>

    

    

    

    

    <div class="meta">
        
            
                
                <p>
            
        
        </p>

        

        
    </div>

    <div class="description">
        <p>The server has stopped</p>

<p>This event is fired after the server has stopped accepting inbound
connections, and has closed all existing connections and released
associated resources.</p>
    </div>

    


    
</div>

                
            </div>
        
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="ft">
        <div class="footer-left">
          Copyright &copy; 2010-2013 <a href="https://github.com/lorenwest/node-monitor">Loren West, and other contributors</a>. All rights reserved.
        </div>
        <div class="footer-right">
          Docs generated using <a href="https://github.com/yui/yuidoc">YUIDoc JS</a>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
